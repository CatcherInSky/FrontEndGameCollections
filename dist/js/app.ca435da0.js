(function(){var e={3198:function(e,n,t){"use strict";var o,s,r=t(9242),i=t(3396),l=t(678),a=t(4301),c=t(3282);(function(e){e["GOLD"]="gold",e["ROCK"]="rock",e["DIAMOND"]="diamond",e["EXP1"]="explosiveBucket",e["EXP2"]="explosive2",e["RAT1"]="rat1",e["RAT2"]="rat2",e["UN"]="unknown"})(o||(o={})),function(e){e["POD"]="powder",e["POW"]="power",e["ROC"]="collect1",e["DIC"]="collect2",e["LUCK"]="luck"}(s||(s={}));const u=2,d=1e3,p=1200,h=900,v=180,y=h-v,g=200,m=[80,100],f=[400,350,450],x=2,w=20,k=10,b=60,S=1,U=60,_=120,D=500,O=1,$={radius:15,worth:100,speed:1,type:o.GOLD},C={radius:30,worth:30,speed:2,type:o.GOLD},j={radius:75,worth:30,speed:2,type:o.GOLD},P={radius:30,worth:3,speed:1,type:o.ROCK},R={radius:45,worth:3,speed:1,type:o.ROCK},A={radius:100,worth:3,speed:1,type:o.EXP1},T={radius:0,worth:1,speed:1,type:o.EXP2},z=(o.RAT1,{radius:10,worth:602,speed:1,type:o.RAT2}),E={radius:30,worth:0,speed:1,type:o.UN},I=(0,a.Q_)("user",{state:()=>({people:1,mission:0,highest:0,score:0,powder:0}),actions:{reset(){this.mission=0,this.score=0,this.powder=0}},persist:{enabled:!0}}),K=(0,a.Q_)("temp",{state:()=>({process:0})}),M=(0,a.Q_)("mission",{state:()=>({score:0,time:d,powder:0,buffs:[],target:0,minerals:[]}),actions:{reset(){const{score:e,powder:n}=I();this.score=e,this.powder=n,this.time=d,this.buffs=[]}}}),G=(0,a.Q_)("hook1",{state:()=>({id:0,angle:0,direction:1,extend:0,length:0,mineral:null,score:0,x:0,y:0}),actions:{reset(e,n){this.angle=0,this.direction=1,this.extend=0,this.length=b,this.mineral=null,this.score=0,this.x=f[e+n-1]+g,this.y=-w}}}),Z=(0,a.Q_)("hook2",{state:()=>({id:1,angle:0,direction:1,extend:0,length:0,mineral:null,score:0,x:0,y:0}),actions:{reset(e,n){this.angle=0,this.direction=1,this.extend=0,this.length=b,this.mineral=null,this.score=0,this.x=f[e+n-1]+g,this.y=-w}}}),J=(0,a.WB)();J.use(c.Z);var L=J,F=(0,i.aZ)({name:"App",setup(e){const n=K(),{process:t}=(0,a.Jk)(n),o=I();o.mission>=u||0===o.mission?t.value=0:t.value=o.mission+.5;const s=(0,l.tv)();return(0,i.YP)(t,(e=>{let n="/";n=e?e>u?"/end":e===Math.floor(e)?"/mission":"/shop":"/start",s.push(n)}),{immediate:!0}),window.addEventListener("popstate",(()=>{history.pushState(null,"",document.URL)})),(e,n)=>{const t=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(t)}}});const N=F;var W=N,X=t(7139),H=t(4870);const Y=[...[{x:237,y:116},{x:402,y:255},{x:1008,y:180},{x:948,y:255},{x:953,y:321}].map((e=>({...e,...$}))),...[{x:285,y:560},{x:528,y:490},{x:729,y:270}].map((e=>({...e,...C}))),...[{x:150,y:375},{x:1100,y:450}].map((e=>({...e,...j})))],B=[...[{x:150,y:225},{x:1029,y:114}].map((e=>({...e,...P}))),...[{x:417,y:630},{x:900,y:417}].map((e=>({...e,...R})))],Q=[{x:807,y:644,...E}];var q=[...Y,...B,...Q].map(((e,n)=>({...e,id:n})));const V=[{x:300,y:100,...P},{x:500,y:500,...C}],ee=[{x:400,y:600,...P}],ne=[{x:1e3,y:400,...A}],te=[{x:1e3,y:100,direction:1,range:[600,900],...z}];var oe={target:20,minerals:[...V,...ee,...ne,...te].map(((e,n)=>({...e,id:n})))},se=[q,oe],re=(0,i.aZ)({name:"ScorePanel",setup(e){const n=M(),{target:t,buffs:o,score:s,powder:r}=(0,a.Jk)(n);return(e,n)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",null,"分数："+(0,X.zw)((0,H.SU)(s)),1),(0,i._)("div",null,"目标分数："+(0,X.zw)((0,H.SU)(t)),1),(0,i._)("div",null,"增益："+(0,X.zw)((0,H.SU)(o).join(",")),1),(0,i._)("div",null,"炸药："+(0,X.zw)((0,H.SU)(r)),1)],64))}});const ie=re;var le=ie,ae=(t(6699),t(677));const ce=e=>{const{angle:n,length:t,x:o,y:s}=e;return{x:ae.ku(`${o} - ${t} * sin(${n} deg)`),y:ae.ku(`${t} * cos(${n} deg)`)+s}},ue=(e,n)=>ae.ku(`sqrt((${e.x} - ${n.x}) ^ 2 + (${e.y} - ${n.y}) ^ 2)`),de=(e,n)=>n.filter((()=>!0)).findIndex((({radius:n,x:t,y:o})=>ue(ce(e),{x:t,y:o})-n-k<1)),pe=e=>{const{angle:n,length:t,x:o,y:s}=e,r=ae.ku(`abs(${t} * cos(${n} deg))`),i=ae.ku(`abs(${t} * sin(${n} deg))`);return r>=y-s||i>=(n>0?o:p-o)},he=e=>{e.time-=1/_},ve=e=>{const{angle:n,direction:t}=e;n>U?e.direction=-1:n<-U&&(e.direction=1),e.angle+=.5*t},ye=e=>-1!==e.findIndex((({type:e})=>e===o.RAT1||e===o.RAT2)),ge=e=>{e.value=e.value.map((e=>{const{range:n,type:t}=e;let{x:s,direction:r}=e;return t!==o.RAT1&&t!==o.RAT2||!n||(s<=n[0]?r=1:s>=n[1]&&(r=-1)),s+=(r||0)*O,{...e,x:s,direction:r}}))},me=(e,n)=>{const{minerals:t}=n;n.minerals=t.filter((n=>ue(t[e],n)>D))},fe=()=>{console.log("大乐透")},xe=(e,n,t)=>{const{minerals:s}=t;console.log(`抓到第${e}个`);const r=s[e];r.type===o.EXP1?(me(e,t),n.mineral={x:0,y:0,...T}):r.type===o.UN?(r.speed=[.1,.5,1,2,3][Math.floor(5*Math.random())],n.mineral=r,t.minerals.splice(e,1)):(n.mineral=r,t.minerals.splice(e,1))},we=e=>{e.mineral||pe(e)?e.extend=-1:e.length+=e.extend*S},ke=(e,n)=>{const{mineral:t}=e,{buffs:r}=n;let i=1;t?.type===o.UN?(fe(),i=0):t?.type===o.ROCK&&r.includes(s.POW)||t?.type===o.DIAMOND&&r.includes(s.DIC)?i=3:t?.type===o.RAT2&&r.includes(s.DIC)&&(i=3,n.score-=2);const l=(t?.worth||0)*i;n.score+=l,e.score+=l,e.mineral=null},be=(e,n)=>{const{mineral:t,length:o,extend:r}=e;if(o<b)e.extend=0,ke(e,n);else{const{buffs:o}=n;e.length+=t?r*t.speed*(o.includes(s.POW)?2:1):r}};var Se=e=>{const n=[G(),Z()],t=I(),o=M(),{minerals:s}=(0,a.Jk)(o),r=Array.from({length:t.people},((e,t)=>n[t]));let i=ye(s.value);return setInterval((()=>{o.time<=0&&e(),r.forEach((e=>{if(e.extend>0){const n=de(e,s.value);-1!==n&&(xe(n,e,o),i=ye(s.value)),we(e)}else e.extend<0?be(e,o):ve(e)})),i&&ge(s),he(o)}),1e3/_)};const Ue={class:"button"},_e=["disabled"],De={style:{position:"relative"}},Oe={style:{"text-align":"center"}};var $e=(0,i.aZ)({name:"HookTool",props:{hook:null},setup(e){const n=e,{angle:t,extend:o,length:s,mineral:r,score:l}=(0,H.BK)(n.hook),c=I(),u=(0,i.Fl)((()=>`\n  z-index: 10;\n  position: absolute;\n  top: ${v-m[1]}px;\n  left: ${f[n.hook.id+c.people-1]-m[0]/2}px;\n`)),d=(0,i.Fl)((()=>`\n  background: blue;\n  width: ${m[0]}px;\n  height: ${m[1]}px;\n`)),p=(0,i.Fl)((()=>`\n    transform: rotate(${t.value}deg);\n    top: -${w}px;\n    left: ${m[0]/2-x/2}px\n`)),h=(0,i.Fl)((()=>`\n    height: ${s.value}px\n`)),y=(0,i.Fl)((()=>`\n      height: ${2*k}px;\n      width: ${2*k}px; \n      top: -${k-x/2}px;\n      left: -${k-x/2}px;\n`)),g=()=>{0===o.value&&(o.value=1)},b=M(),{powder:S}=(0,a.Jk)(b),U=()=>{S.value>0&&null!==r.value&&(r.value=null,S.value-=1)};return(e,n)=>((0,i.wg)(),(0,i.iD)("div",{style:(0,X.j5)((0,H.SU)(u))},[(0,i._)("div",Ue,[(0,i._)("button",{onClick:g},"抓"),(0,i._)("button",{onClick:U,disabled:(0,H.SU)(S)<=0||null===(0,H.SU)(r)},"炸",8,_e)]),(0,i._)("div",{style:(0,X.j5)((0,H.SU)(d))},null,4),(0,i._)("div",De,[(0,i._)("div",{class:"hook",style:(0,X.j5)((0,H.SU)(p))},[(0,i._)("div",{class:"line",style:(0,X.j5)((0,H.SU)(h))},null,4),(0,i._)("div",{class:"grasp",style:(0,X.j5)((0,H.SU)(y))},null,4)],4)]),(0,i._)("div",Oe,(0,X.zw)((0,H.SU)(l)),1)],4))}});const Ce=$e;var je=Ce;const Pe=[650,1195,2010,3095,4450,6075,10135,12570,15275],Re=e=>{const n=Pe.length,t=Pe[n-1];return e<=n?Pe[e-1]:t+2705*(e-n)};var Ae=Re,Te=(0,i.aZ)({name:"MineralsItem",props:{x:null,y:null,radius:null,type:null},setup(e){const n=e,t={[o.GOLD]:"yellow",[o.ROCK]:"gray",[o.DIAMOND]:"blue",[o.EXP1]:"brown",[o.EXP2]:"brown",[o.RAT1]:"black",[o.RAT2]:"blue",[o.UN]:"green"},{x:s,y:r,radius:l,type:a}=(0,H.BK)(n),c=(0,i.Fl)((()=>`\n  top: ${r.value-l.value}px; \n  left:${s.value-l.value}px;\n  width: ${2*l.value}px; \n  height: ${2*l.value}px;\n  background:${t[a.value]};\n `));return(e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"minerals",style:(0,X.j5)((0,H.SU)(c))},null,4))}});const ze=Te;var Ee=ze,Ie=(0,i.aZ)({name:"CountDown",setup(e){const n=M(),{time:t}=(0,a.Jk)(n),o=K(),{process:s}=(0,a.Jk)(o);return(e,n)=>((0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",null,"关卡："+(0,X.zw)((0,H.SU)(s)),1),(0,i._)("div",null,"时间："+(0,X.zw)((0,H.SU)(t).toFixed(0)),1)],64))}});const Ke=Ie;var Me=Ke;const Ge={id:"left"},Ze={id:"center"},Je={id:"right"};var Le=(0,i.aZ)({name:"GameScene",setup(e){const n=I(),t=[G(),Z()],o=M(),{minerals:s}=(0,a.Jk)(o),r=K();let l;const c=Array.from({length:n.people},((e,n)=>t[n])),d=()=>{o.score>=o.target?(console.log("数据达标"),n.mission=r.process,n.powder=o.powder,n.score=o.score,r.process+=.5):(console.log("数据不达标"),r.process=u+.5)};return(0,i.bv)((()=>{o.target=Ae(r.process),o.minerals=se[r.process-1],c.forEach(((e,t)=>e.reset(t,n.people))),l=Se(d)})),(0,i.Jd)((()=>{clearInterval(l)})),(e,n)=>((0,i.wg)(),(0,i.iD)("div",{id:"background",style:(0,X.j5)(`width:${(0,H.SU)(p)}px;height:${(0,H.SU)(h)}px`)},[(0,i._)("div",{id:"sky",style:(0,X.j5)(`height:${(0,H.SU)(v)}px`)},[(0,i._)("div",Ge,[(0,i.Wm)(le)]),(0,i._)("div",Ze,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,H.SU)(c),(e=>((0,i.wg)(),(0,i.j4)(je,(0,i.dG)({key:e.id},{hook:e}),null,16)))),128))]),(0,i._)("div",Je,[(0,i.Wm)(Me)])],4),(0,i._)("div",{id:"ground",style:(0,X.j5)(`height:${(0,H.SU)(y)}px`)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,H.SU)(s),(e=>((0,i.wg)(),(0,i.j4)(Ee,(0,i.dG)({key:e.id},e),null,16)))),128))],4)],4))}});const Fe=Le;var Ne=Fe;const We=()=>[{price:10,type:s.POD},{price:20,type:s.POW},{price:20,type:s.DIC}],Xe={id:"background"},He=["onClick"];var Ye=(0,i.aZ)({name:"ShopScene",setup(e){const n=M();(0,i.bv)((()=>{n.reset()}));const{score:t}=(0,a.Jk)(n),o=We(),r=({price:e,type:t})=>{n.score-=e,t===s.POD?n.powder+=1:n.buffs.push(t)},l=K(),c=()=>{l.process+=.5};return(e,n)=>((0,i.wg)(),(0,i.iD)("div",Xe,[(0,i._)("div",null,"分数"+(0,X.zw)((0,H.SU)(t)),1),(0,i._)("div",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,H.SU)(o),(e=>((0,i.wg)(),(0,i.iD)("button",{key:e.type,onClick:n=>r(e)},(0,X.zw)(e.type),9,He)))),128))]),(0,i._)("button",{onClick:c},"购买完毕")]))}});const Be=Ye;var Qe=Be;const qe={id:"background"},Ve=(0,i._)("div",null,"开始游戏",-1);var en=(0,i.aZ)({name:"OpenScene",setup(e){const n=I();n.reset();const t=M();t.reset();const o=K(),s=()=>{n.people=1,o.process=1},r=()=>{n.people=2,o.process=1};return(e,n)=>((0,i.wg)(),(0,i.iD)("div",qe,[Ve,(0,i._)("button",{onClick:s},"单人"),(0,i._)("button",{onClick:r},"双人")]))}});const nn=en;var tn=nn;const on={id:"background"},sn={key:0},rn={key:1};var ln=(0,i.aZ)({name:"EndScene",setup(e){const n=I(),t=M(),o=K(),{mission:s,highest:r}=n,{score:l}=t;l>r&&(console.log("保存最高分"),n.highest=l);const a=()=>{o.process=0},c=()=>{n.mission>0?o.process=Math.ceil(n.mission)+.5:(n.reset(),t.reset(),o.process=1)};return(e,n)=>((0,i.wg)(),(0,i.iD)("div",on,[(0,H.SU)(s)>=(0,H.SU)(u)?((0,i.wg)(),(0,i.iD)("div",sn,"通关")):((0,i.wg)(),(0,i.iD)("div",rn,"关卡"+(0,X.zw)((0,H.SU)(s)+1)+"失败",1)),(0,i._)("div",null,"最终分数"+(0,X.zw)((0,H.SU)(l)),1),(0,i._)("div",null,"最高分数"+(0,X.zw)((0,H.SU)(r)||0),1),(0,H.SU)(s)<(0,H.SU)(u)?((0,i.wg)(),(0,i.iD)("button",{key:2,onClick:c},"重来本关")):(0,i.kq)("",!0),(0,i._)("button",{onClick:a},"从头开始")]))}});const an=ln;var cn=an;const un=[{path:"/shop",component:Qe},{path:"/mission",component:Ne},{path:"/start",component:tn},{path:"/end",component:cn}],dn=(0,l.p7)({history:(0,l.PO)(),routes:un,scrollBehavior:()=>{history.pushState(null,"",document.URL)}});var pn=dn;(0,r.ri)(W).use(L).use(pn).mount("#app")},5042:function(){}},n={};function t(o){var s=n[o];if(void 0!==s)return s.exports;var r=n[o]={id:o,loaded:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}t.m=e,function(){t.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){t.amdO={}}(),function(){var e=[];t.O=function(n,o,s,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],s=e[u][1],r=e[u][2];for(var l=!0,a=0;a<o.length;a++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[a])}))?o.splice(a--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=s();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,s,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var s,r,i=o[0],l=o[1],a=o[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(s in l)t.o(l,s)&&(t.m[s]=l[s]);if(a)var u=a(t)}for(n&&n(o);c<i.length;c++)r=i[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkGoldMiner"]=self["webpackChunkGoldMiner"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(3198)}));o=t.O(o)})();
//# sourceMappingURL=app.ca435da0.js.map